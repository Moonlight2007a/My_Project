<!DOCTYPE html>
    <head>
        <title>Premi√®re page</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="CSS.css">
    </head>

    <style>     
        body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #78c850; /* Vert du terrain */
        }
    
        .title{
            width: 100%;
            height: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid white;
        }

        .score{
            background-color: white;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: 8vw;
            height: 8vh;  
            border: 2px solid white;
            border-bottom-right-radius: 50%;
            border-bottom-left-radius: 50%;
            margin-bottom: 5vh;
            gap: 7%;
            
        }

        .score p{
            font-size: 5vh;
            font-weight: bold;
        }

        .score_b{
            color: #136fac; 
        }

        .score_r{
            color: #c40505; 
        }

        .field {
            position: relative;
            width: calc(100vw*0.7);
            height: calc(100vw/3);
            background-color: #3b8e33; /* Terrain vert */
            border: 10px solid white; /* Bordure du terrain */
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        }

        .circle{
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 7px solid white; /* Bordure du terrain */
            border-radius: 50%;
            height: 60px;
            width: 60px;
        }

        .halfway_line{
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 5px solid white; /* Bordure du terrain */
            height: 101%;
        }

        .goal_area_r{
            content: '';
            position: absolute;
            top: 50%;
            left: 99.7%;
            transform: translate(-90%, -50%);
            border: 7px solid white; /* Bordure du terrain */
            height: calc(100%/9*5);
            width: 10%;
        }

        .goal_area_l{
            content: '';
            position: absolute;
            top: 50%;
            left: 0.5%;
            transform: translate(-10%, -50%);
            border: 7px solid white; /* Bordure du terrain */
            height: calc(100%/9*5);
            width: 10%;
        }

        .goal_l{
            content: '';
            position: absolute;
            top: 50%;
            left: 0%;
            transform: translate(-100%, -50%);
            border: 5px solid white; /* Bordure du terrain */
            height: calc(100%/9*3.5);
            width: 8%;
        }

        .goal_r{
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            transform: translate(-0%, -50%);
            border: 5px solid white; /* Bordure du terrain */
            height: calc(100%/9*3.5);
            width: 8%;
        }

        .player_r{
            position: absolute;
            cursor: pointer;
            background-color: red;
            height: 4vw;
            width: 4vw;
            border-radius: 50%;
            border: black 0.2vw solid;
            transform: translate(-50%, -50%);
            z-index: 2;
        }

        .ball{
            position: absolute;
            background-color: white;
            border: black 0.2vw solid;
            height: 2vw;
            width: 2vw;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            top: 50%;
            left: 50%;
        }

        .player_b{
            position: absolute;
            cursor: pointer;
            background-color: blue;
            height: 4vw;
            width: 4vw;
            border-radius: 50%;
            border: black 0.2vw solid;
            transform: translate(-50%, -50%);
            z-index: 2;
        }

        .force{
            content: '';
            position: absolute;
            background-color: blue;
            border-radius: 50%;
            height: 0vw;
            width: 0vw;
            left: 0%;
            top: 0%;
            z-index: 1;
        }

      </style>
    <body>
        <div class="title">
            <h1>Titre du jeu</h1>
        </div>
        <div class="score">
            <p class="score_b">0</p>
            <p class="score_">.</p>
            <p class="score_r">0</p>
        </div>

        <div class="field">
            
            <!-- Cercle du terrain -->
            <div class="circle"></div>

            <!-- zone du but du terrain -->
            <div class="goal_area_r"></div>
            <div class="goal_area_l"></div>

            <!-- Ligne mediane du terrain -->
            <div class="halfway_line"></div>

            <!-- cage du terrain -->
            <div class="goal_r"></div>
            <div class="goal_l"></div>

            <!-- Lignes du terrain -->
            <div class="line horizontal"></div>
            <div class="line vertical"></div>
        
            <!-- Zones de penalty -->
            <div class="penalty-area-left"></div>
            <div class="penalty-area-right"></div>

            <div class="ball"></div>
        
            <div class="player_r player0"></div>
            <div class="player_r player1"></div>
            <div class="player_r player2"></div>
            <div class="player_r player3"></div>
            <div class="player_r player4"></div>
            <div class="player_b player5"></div>
            <div class="player_b player6"></div>
            <div class="player_b player7"></div>
            <div class="player_b player8"></div>
            <div class="player_b player9"></div>
            
            <div class="force"></div>
        </div>
    </body> 
    <script>

    const players = [];

    for (let i = 0; i <= 9; i++) {
        const player = document.querySelector(`.player${i}`);
        players.push(player);
    }
    const force = document.querySelector(".force");
    const ball = document.querySelector(".ball")

    let randomIntFild = Math.random();
    if (randomIntFild >= 0 && randomIntFild < 0.25){
        // Placement players terrin 1 : // B / 1 / 2 / 2 /
        // players Bleu
        players[0].style.top = "15%"
        players[0].style.left = "calc(50% + 7%)"

        players[1].style.top = "38%"
        players[1].style.left = "calc(50% + 42%)"

        players[2].style.top = "50%"
        players[2].style.left = "calc(50% + 46.5%)"

        players[3].style.top = "62%"
        players[3].style.left = "calc(50% + 42%)"

        players[4].style.top = "85%"
        players[4].style.left = "calc(50% + 7%)"

        // players Rouge
        players[5].style.top = "15%"
        players[5].style.left = "calc(50% - 7%)"

        players[6].style.top = "38%"
        players[6].style.left = "calc(50% - 42%)"

        players[7].style.top = "50%"
        players[7].style.left = "calc(50% - 46.5%)"

        players[8].style.top = "62%"
        players[8].style.left = "calc(50% - 42%)"

        players[9].style.top = "85%"
        players[9].style.left = "calc(50% - 7%)"
    } else if (randomIntFild >= 0.25 && randomIntFild < 0.50){
        // Placement players terrin 2 : // B / 1 / 4 /
        // players Bleu
        players[0].style.top = "15%"
        players[0].style.left = "calc(50% + 25%)"

        players[1].style.top = "38%"
        players[1].style.left = "calc(50% + 25%)"

        players[2].style.top = "50%"
        players[2].style.left = "calc(50% + 46.5%)"

        players[3].style.top = "62%"
        players[3].style.left = "calc(50% + 25%)"

        players[4].style.top = "85%"
        players[4].style.left = "calc(50% + 25%)"

        // players Rouge
        players[5].style.top = "15%"
        players[5].style.left = "calc(50% - 25%)"

        players[6].style.top = "38%"
        players[6].style.left = "calc(50% - 25%)"

        players[7].style.top = "50%"
        players[7].style.left = "calc(50% - 46.5%)"

        players[8].style.top = "62%"
        players[8].style.left = "calc(50% - 25%)"

        players[9].style.top = "85%"
        players[9].style.left = "calc(50% - 25%)"
    } else if (randomIntFild >= 0.50 && randomIntFild < 0.75){
        // Placement players terrin 3 : B / 1 / 1 / 3 
        // players Bleu
        players[0].style.top = "35%"
        players[0].style.left = "calc(50% + 5%)"

        players[1].style.top = "50%"
        players[1].style.left = "calc(50% + 8%)"

        players[2].style.top = "50%"
        players[2].style.left = "calc(50% + 46.5%)"

        players[3].style.top = "50%"
        players[3].style.left = "calc(50% + 35%)"

        players[4].style.top = "65%"
        players[4].style.left = "calc(50% + 5%)"

        // players Rouge
        players[5].style.top = "35%"
        players[5].style.left = "calc(50% - 5%)"

        players[6].style.top = "50%"
        players[6].style.left = "calc(50% - 8%)"

        players[7].style.top = "50%"
        players[7].style.left = "calc(50% - 46.5%)"

        players[8].style.top = "50%"
        players[8].style.left = "calc(50% - 35%)"

        players[9].style.top = "65%"
        players[9].style.left = "calc(50% - 5%)"
    } else if (randomIntFild >= 0.75 && randomIntFild < 1){
        // Placement players terrin 3 : B / 2 / 2 / 1 
        // players Bleu
        players[0].style.top = "35%"
        players[0].style.left = "calc(50% + 12%)"

        players[1].style.top = "50%"
        players[1].style.left = "calc(50% + 7%)"

        players[2].style.top = "40%"
        players[2].style.left = "calc(50% + 46.5%)"

        players[3].style.top = "60%"
        players[3].style.left = "calc(50% + 46.5%)"

        players[4].style.top = "65%"
        players[4].style.left = "calc(50% + 12%)"

        // players Rouge
        players[5].style.top = "35%"
        players[5].style.left = "calc(50% - 12%)"

        players[6].style.top = "50%"
        players[6].style.left = "calc(50% - 7%)"

        players[7].style.top = "40%"
        players[7].style.left = "calc(50% - 46.5%)"

        players[8].style.top = "60%"
        players[8].style.left = "calc(50% - 46.5%)"

        players[9].style.top = "65%"
        players[9].style.left = "calc(50% - 12%)"
    }

    let isDragging = false;
    let offsetX, offsetY;
    let dragPlayer = null

    // Positionner la players et la force en fixed d√®s le d√©but
    for (let i = 1; i <= 9; i++) {
        players[i].style.position = "absolute";
    }
    force.style.position = "fixed";

    // Initialisation de la force √† invisible et √† taille nulle
    force.style.display = "none";
    force.style.width = force.style.height = "0vw";
    force.style.opacity = 0;

    // Lorsque le player est cliqu√©e, on d√©marre le drag
    // Ajouter un √©couteur √† chaque √©l√©ment du tableau
    players.forEach((player, index) => {
        if (player) { // On v√©rifie que l'√©l√©ment existe
            player.addEventListener("mousedown", (event) => {
                dragPlayer = player
                isDragging = true; // Commence le drag

                // Afficher la force au clic
                force.style.display = "block"; 

                // Calcul des offsets pour le d√©placement de la souris
                const rect = player.getBoundingClientRect();
                offsetX = event.clientX - rect.left;
                offsetY = event.clientY - rect.top;

                // Calcul du centre du player
                const playerCenterX = rect.left + rect.width / 2;
                const playerCenterY = rect.top + rect.height / 2;

                // Positionner la force au centre du players
                force.style.left = (playerCenterX - force.offsetWidth / 2) + "px";
                force.style.top = (playerCenterY - force.offsetHeight / 2) + "px";
            });
        };
    });

    // Lorsque la souris se d√©place, on met √† jour la position de la force
    document.addEventListener('mousemove', (event) => {
    if (isDragging && dragPlayer) {
        const rect = dragPlayer.getBoundingClientRect();
        const playerCenterX = rect.left + rect.width / 2;
        const playerCenterY = rect.top + rect.height / 2;

        const mouseX = event.clientX;
        const mouseY = event.clientY;
        const distance = Math.sqrt(Math.pow(mouseX - playerCenterX, 2) + Math.pow(mouseY - playerCenterY, 2));

        // Taille de force
        const maxSize = 5.5;
        const forceSize = Math.min(maxSize, distance * 0.05) + 3.5;

        // Opacit√© de force
        const maxOpacity = 0.7;
        const minOpacity = 0.5;
        const opacity = Math.min(maxOpacity, Math.max(minOpacity, distance / 200));

        // Appliquer la taille
        force.style.width = force.style.height = `${forceSize}vw`;
        force.style.opacity = opacity;

        // üí° Utiliser la taille calcul√©e plut√¥t que offsetWidth
        const forcePx = window.innerWidth * (forceSize / 100); // conversion vw ‚Üí px
        force.style.left = `${playerCenterX - forcePx / 2}px`;
        force.style.top = `${playerCenterY - forcePx / 2}px`;
        }
    });


    // Lorsqu'on rel√¢che le clic, on arr√™te le drag et cache la force
    document.addEventListener("mouseup", () => {
        if (isDragging) {
            isDragging = false; // R√©initialise l'√©tat de drag
            force.style.display = "none"; // Cache la force
            force.style.width = force.style.height = "0vw"; // R√©initialise la taille
            force.style.opacity = 0; // R√©initialise l'opacit√©
        }
    });
    </script>
